---
title: "Simulation Design"
author: "Aadya"
date: "2025-10-24"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

# make Python chunks work
library(reticulate)

# (optional) point to a specific python if needed:
# use_python("C:/Path/To/Python.exe", required = FALSE)

# helpful for debugging knit working directory:
cat("Knit working directory:\n", getwd(), "\n")
cat("Files here:\n")
print(list.files())

```

## Example: Basic Simulation Function

```{python}
import numpy as np

def simulate_ols(n_sim=1000, n_obs=50, beta0=0, beta1=0.5):
    """
    Simulates OLS estimation for a static/exogenous DGP: y = beta0 + beta1*x + u.

    Args:
        n_sim (int): Number of simulations to run. Defaults to 1000.
        n_obs (int): Number of observations per simulation. Defaults to 50.
        beta0 (float): True intercept value. Defaults to 0.
        beta1 (float): True slope coefficient. Defaults to 0.5.

    Returns:
        list[float]: List of errors of beta1 estimates for each simulation.
    """

    results_ols_errors = []

    rng = np.random.default_rng()

    for _ in range(n_sim):
        # 1. Draw data
        x = rng.normal(size=n_obs)
        u = rng.normal(size=n_obs)
        y = beta0 + beta1 * x + u

        # 2. Run OLS estimation
        W = np.column_stack([np.ones(n_obs), x])
        beta_hat = np.linalg.inv(W.T @ W) @ (W.T @ y)

        # 3. Store error of slope
        results_ols_errors.append(beta_hat[1] - beta1)

    # also return mean bias so we can inspect it quickly
    mean_bias = np.mean(results_ols_errors)
    print(f"Mean bias of beta1: {mean_bias}")

    return results_ols_errors
```

## Our First Results: Static Model
Now can execute our simulation by calling function with default arguments:

```{python}
static_results = simulate_ols()
print(f"Bias (static DGP): {np.mean(static_results)}")
```

Qualitatively:

Bias small relative to coefficients (recall beta1=0.5)
Theory is confirmed

### Setting Seeds
